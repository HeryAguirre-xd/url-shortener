# Copilot Instructions for AI Agents

## Project Overview
- **Goal**: Build a "Senior-Level" distributed URL shortener to practice system design and E2E integration.
- **Key Characteristics**: High scalability, low-latency redirects, async analytics, and full observability.

## Architecture & Tech Stack
- **Pattern**: Microservices (Monorepo).
- **Services**:
  - **Gateway**: Entry point (Nginx/Traefik) for rate limiting and routing.
  - **Auth Service**: User management & JWT issuance (FastAPI + PostgreSQL).
  - **Write Service (Manager)**: URL creation/management (FastAPI + Postgres/NoSQL).
  - **Read Service (Redirector)**: High-performance redirects (FastAPI/Go + Redis).
  - **Analytics Service**: Async processing of click events (Kafka -> ClickHouse/Elastic).
- **Infrastructure**:
  - **Containerization**: Docker (Multi-stage builds).
  - **Orchestration**: Kubernetes (Kind/Minikube) with Helm.
  - **IaC**: Terraform (or LocalStack for simulation).

## Developer Workflows
- **Local Dev**: `docker-compose up` (primary), `python main.py` (service-level).
- **Testing**: `pytest` for unit/integration tests.
- **CI/CD**: GitHub Actions for linting, testing, and image building.

## Coding Conventions
- **Language**: Python 3.11+ (FastAPI) for most services.
- **Style**: PEP 8, strictly typed (Pydantic models).
- **Async**: Prefer `async/await` for I/O bound operations.
- **Documentation**: OpenAPI (Swagger) auto-generated by FastAPI.

## Key Directories (Planned)
- `/services`: Source code for individual microservices.
- `/infra`: Terraform and Kubernetes manifests.
- `/common`: Shared libraries (logging, auth middleware).
